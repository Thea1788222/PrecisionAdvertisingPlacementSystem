<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>新闻网站广告追踪测试</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        .test-section {
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 20px;
            margin-bottom: 20px;
        }
        .test-section h2 {
            margin-top: 0;
        }
        button {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background-color: #0056b3;
        }
        #result {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            padding: 15px;
            margin-top: 20px;
            white-space: pre-wrap;
        }
        .ad-container {
            border: 2px dashed #007bff;
            padding: 20px;
            text-align: center;
            margin: 20px 0;
        }
        .news-article {
            border: 1px solid #eee;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <h1>新闻网站广告追踪测试</h1>
    
    <div class="test-section">
        <h2>1. SDK初始化</h2>
        <button onclick="initSDK()">初始化广告追踪SDK</button>
        <p>初始化SDK并连接到广告商的追踪服务。</p>
    </div>
    
    <div class="test-section">
        <h2>2. 用户行为追踪</h2>
        <button onclick="trackNewsView()">浏览新闻</button>
        <button onclick="trackComment()">发表评论</button>
        <button onclick="trackShare()">分享新闻</button>
        <p>模拟用户在新闻网站上的行为。</p>
    </div>
    
    <div class="test-section">
        <h2>3. 浏览新闻文章</h2>
        <div class="news-article">
            <h3>科技新闻标题</h3>
            <p>这是一篇关于最新科技发展的新闻文章内容。文章内容包含各种科技相关的关键词，用于测试用户兴趣追踪功能。</p>
            <button onclick="trackTechNews()">浏览科技新闻</button>
        </div>
        <div class="news-article">
            <h3>体育新闻标题</h3>
            <p>这是一篇关于体育赛事的新闻文章内容。文章内容包含各种体育相关的关键词，用于测试用户兴趣追踪功能。</p>
            <button onclick="trackSportsNews()">浏览体育新闻</button>
        </div>
    </div>
    
    <div class="test-section">
        <h2>4. 广告交互追踪</h2>
        <div class="ad-container">
            <h3>新闻资讯广告</h3>
            <p>这是基于用户兴趣的新闻资讯广告。</p>
            <button onclick="trackAdImpression()">记录广告展示</button>
            <button onclick="trackAdClick()">记录广告点击</button>
        </div>
    </div>
    
    <div class="test-section">
        <h2>5. 用户信息</h2>
        <button onclick="showUserInfo()">显示用户追踪信息</button>
        <p>显示当前用户的追踪ID和相关信息。</p>
    </div>
    
    <div id="result"></div>

    <!-- 引入广告追踪SDK -->
    <script src="http://track.test.com:8084/ad-tracker.js"></script>
    
    <script>
        // 显示结果的辅助函数
        function showResult(message) {
            document.getElementById('result').textContent = message;
        }
        
        // 初始化SDK
        function initSDK() {
            try {
                adTracker.init({
                    trackerServer: 'http://track.test.com:8084',
                    website: 'news.test.com'
                });
                showResult('新闻网站SDK初始化成功!\n' +
                          '追踪服务器: http://track.test.com:8084\n' +
                          '网站标识: news.test.com');
            } catch (error) {
                showResult('SDK初始化失败: ' + error.message);
            }
        }

        // 浏览新闻
        function trackNewsView() {
            try {
                adTracker.trackPageView({
                    targetId: 'news-12345',
                    category: 'general',
                    keywords: '新闻,资讯'
                });
                showResult('新闻浏览记录成功!\n新闻ID: news-12345\n类别: general');
            } catch (error) {
                showResult('新闻浏览记录失败: ' + error.message);
            }
        }

        // 发表评论
        function trackComment() {
            try {
                adTracker.trackClick({
                    targetId: 'comment-button',
                    category: 'engagement',
                    keywords: '评论,互动'
                });
                showResult('发表评论记录成功!');
            } catch (error) {
                showResult('发表评论记录失败: ' + error.message);
            }
        }

        // 分享新闻
        function trackShare() {
            try {
                adTracker.trackClick({
                    targetId: 'share-button',
                    category: 'engagement',
                    keywords: '分享,社交'
                });
                showResult('分享新闻记录成功!');
            } catch (error) {
                showResult('分享新闻记录失败: ' + error.message);
            }
        }

        // 浏览科技新闻
        function trackTechNews() {
            try {
                adTracker.trackPageView({
                    targetId: 'tech-news-001',
                    category: 'technology',
                    keywords: '科技,创新,技术'
                });
                showResult('科技新闻浏览记录成功!\n新闻ID: tech-news-001\n类别: technology');
            } catch (error) {
                showResult('科技新闻浏览记录失败: ' + error.message);
            }
        }

        // 浏览体育新闻
        function trackSportsNews() {
            try {
                adTracker.trackPageView({
                    targetId: 'sports-news-001',
                    category: 'sports',
                    keywords: '体育,赛事,竞技'
                });
                showResult('体育新闻浏览记录成功!\n新闻ID: sports-news-001\n类别: sports');
            } catch (error) {
                showResult('体育新闻浏览记录失败: ' + error.message);
            }
        }

        // 记录广告展示
        function trackAdImpression() {
            try {
                adTracker.trackAdImpression(201, 'news-sidebar', 1.80);
                showResult('广告展示记录成功!\n广告ID: 201\n位置: news-sidebar\n出价: 1.80');
            } catch (error) {
                showResult('广告展示记录失败: ' + error.message);
            }
        }

        // 记录广告点击
        function trackAdClick() {
            try {
                adTracker.trackAdClick(2001);
                showResult('广告点击记录成功!\n展示ID: 2001');
            } catch (error) {
                showResult('广告点击记录失败: ' + error.message);
            }
        }

        // 显示用户信息
        function showUserInfo() {
            try {
                const fingerprint = adTracker.generateFingerprint();
                showResult('用户追踪信息:\n' +
                          '浏览器指纹: ' + fingerprint);
            } catch (error) {
                showResult('获取用户信息失败: ' + error.message);
            }
        }
    </script>
</body>
</html>